.set LOCALID_GRUNT, 1
.set LOCALID_DEVON_EMPLOYEE, 2
.set LOCALID_CELEBI, 12
.set LOCALID_BIRCH, 14

PetalburgWoods_MapScripts::
	map_script MAP_SCRIPT_ON_LOAD, PetalburgWoods_OnLoad
	map_script MAP_SCRIPT_ON_TRANSITION, PetalburgWoods_OnTransition
	map_script MAP_SCRIPT_ON_RESUME, PetalburgWoods_OnResume
	.byte 0

PetalburgWoods_OnLoad:
	special GetTimeOfDay
	call_if_eq VAR_RESULT, 2, PetalburgWoods_CelebiGrove
	end

PetalburgWoods_CelebiGrove::
	call_if_set FLAG_IS_CHAMPION, PetalburgWoods_CelebiGrove_Appears
	end

PetalburgWoods_CelebiGrove_Appears::
	setmetatile 33, 13, 0x1E5, 1
	setmetatile 34, 13, 0x1E6, 1
	setmetatile 35, 13, 0x1E5, 1
	setmetatile 36, 13, 0x1E6, 1
	@
	setmetatile 33, 14, 0x00D, 0
	setmetatile 34, 14, 0x004, 0
	setmetatile 35, 14, 0x004, 0
	setmetatile 36, 14, 0x00D, 0
	@
	setmetatile 32, 15, 0x1E7, 1
	setmetatile 33, 15, 0x004, 0
	setmetatile 34, 15, 0x0C8, 0
	setmetatile 35, 15, 0x0CA, 0
	setmetatile 36, 15, 0x004, 0
	setmetatile 37, 15, 0x1E6, 1
	@
	setmetatile 32, 16, 0x00D, 0
	setmetatile 33, 16, 0x004, 0
	setmetatile 34, 16, 0x0D8, 0
	setmetatile 35, 16, 0x0DA, 0
	setmetatile 36, 16, 0x004, 0
	setmetatile 37, 16, 0x00D, 0
	@
	setmetatile 32, 17, 0x1C6, 0
	setmetatile 33, 17, 0x1C7, 0
	setmetatile 34, 17, 0x004, 0
	setmetatile 35, 17, 0x004, 0
	setmetatile 36, 17, 0x1C6, 0
	setmetatile 37, 17, 0x1C7, 0
	@
	setmetatile 34, 18, 0x001 0
	setmetatile 35, 18, 0x001 0
	setmetatile 34, 19, 0x001 0
	setmetatile 35, 19, 0x001 0
	setmetatile 34, 20, 0x001 0
	setmetatile 35, 20, 0x001 0
	setmetatile 34, 21, 0x001 0
	setmetatile 35, 21, 0x001 0
	@
	special DrawWholeMapView
	end

PetalburgWoods_OnTransition:
	special GetTimeOfDay
	goto_if_eq VAR_RESULT, 0, PetalburgWoods_OnTransition_Day
	goto_if_eq VAR_RESULT, 1, PetalburgWoods_OnTransition_Twilight
	goto_if_eq VAR_RESULT, 2, PetalburgWoods_OnTransition_Night
	end

PetalburgWoods_OnTransition_Day:
	setvar VAR_TIMEOFDAY, 0
	call Route104_EventScript_TrySetRivalPos
	call Route104_EventScript_ShowOrHideWhiteHerbFlorist
	call PetalburgWoods_EventScript_HideCelebi
	end

PetalburgWoods_OnTransition_Twilight:
	setvar VAR_TIMEOFDAY, 1
	call Route104_EventScript_TrySetRivalPos
	call Route104_EventScript_ShowOrHideWhiteHerbFlorist
	call PetalburgWoods_EventScript_HideCelebi
	end

PetalburgWoods_OnTransition_Night:
	setvar VAR_TIMEOFDAY, 2
	call Route104_EventScript_TrySetRivalPos
	call Route104_EventScript_ShowOrHideWhiteHerbFlorist
	call_if_set FLAG_CAUGHT_CELEBI, PetalburgWoods_EventScript_HideCelebi
	call_if_unset FLAG_CAUGHT_CELEBI, PetalburgWoods_EventScript_TryShowCelebi
	end

PetalburgWoods_OnResume:
	special GetTimeOfDay
	goto_if_eq VAR_RESULT, 0, PetalburgWoods_OnResume_Day
	goto_if_eq VAR_RESULT, 1, PetalburgWoods_OnResume_Twilight
	goto_if_eq VAR_RESULT, 2, PetalburgWoods_OnResume_Night

	end	

PetalburgWoods_OnResume_Day:
	setvar VAR_TIMEOFDAY, 0
	end

PetalburgWoods_OnResume_Twilight:
	setvar VAR_TIMEOFDAY, 1
	end

PetalburgWoods_OnResume_Night:
	setvar VAR_TIMEOFDAY, 2
	call_if_set FLAG_SYS_CTRL_OBJ_DELETE, PetalburgWoods_EventScript_TryRemoveCelebi
	end

PetalburgWoods_EventScript_DevonResearcherLeft::
	lockall
	call PetalburgWoods_EventScript_DevonResearcherIntro
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherApproachPlayerLeft
	waitmovement 0
	msgbox PetalburgWoods_Text_HaveYouSeenShroomish, MSGBOX_DEFAULT
	closemessage
	playbgm MUS_ENCOUNTER_AQUA, FALSE
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaEntrance
	waitmovement 0
	msgbox PetalburgWoods_Text_IWasGoingToAmbushYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaApproachResearcherLeft
	waitmovement 0
	applymovement LOCALID_DEVON_EMPLOYEE, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox PetalburgWoods_Text_HandOverThosePapers, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherFleeToPlayerLeft
	waitmovement 0
	msgbox PetalburgWoods_Text_YouHaveToHelpMe, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaApproachPlayer
	waitmovement 0
	msgbox PetalburgWoods_Text_NoOneCrossesTeamAqua, MSGBOX_DEFAULT
	trainerbattle_no_intro TRAINER_GRUNT_PETALBURG_WOODS, PetalburgWoods_Text_YoureKiddingMe
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaBackOff
	waitmovement 0
	call PetalburgWoods_EventScript_DevonResearcherPostBattle
	applymovement OBJ_EVENT_ID_PLAYER, PetalburgWoods_Movement_WatchResearcherLeave
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherExitLeft
	waitmovement 0
	goto PetalburgWoods_EventScript_RemoveDevonResearcher
	end

PetalburgWoods_EventScript_DevonResearcherRight::
	lockall
	call PetalburgWoods_EventScript_DevonResearcherIntro
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherApproachPlayerRight
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterLeft
	waitmovement 0
	msgbox PetalburgWoods_Text_HaveYouSeenShroomish, MSGBOX_DEFAULT
	closemessage
	playbgm MUS_ENCOUNTER_AQUA, FALSE
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaEntrance
	waitmovement 0
	msgbox PetalburgWoods_Text_IWasGoingToAmbushYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaApproachResearcherRight
	waitmovement 0
	applymovement LOCALID_DEVON_EMPLOYEE, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox PetalburgWoods_Text_HandOverThosePapers, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherFleeToPlayerRight
	waitmovement 0
	msgbox PetalburgWoods_Text_YouHaveToHelpMe, MSGBOX_DEFAULT
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox PetalburgWoods_Text_NoOneCrossesTeamAqua, MSGBOX_DEFAULT
	trainerbattle_no_intro TRAINER_GRUNT_PETALBURG_WOODS, PetalburgWoods_Text_YoureKiddingMe
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaBackOff
	waitmovement 0
	call PetalburgWoods_EventScript_DevonResearcherPostBattle
	applymovement OBJ_EVENT_ID_PLAYER, PetalburgWoods_Movement_WatchResearcherLeave
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherExitRight
	waitmovement 0
	goto PetalburgWoods_EventScript_RemoveDevonResearcher
	end

PetalburgWoods_EventScript_DevonResearcherIntro::
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherLookAround
	waitmovement 0
	msgbox PetalburgWoods_Text_NotAOneToBeFound, MSGBOX_DEFAULT
	closemessage
	return

PetalburgWoods_EventScript_DevonResearcherPostBattle::
	msgbox PetalburgWoods_Text_YouveGotSomeNerve, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_GRUNT, PetalburgWoods_Movement_AquaRunAway
	waitmovement 0
	removeobject LOCALID_GRUNT
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterDown
	waitmovement 0
	msgbox PetalburgWoods_Text_ThatWasAwfullyClose, MSGBOX_DEFAULT
	giveitem ITEM_GREAT_BALL
	goto_if_eq VAR_RESULT, FALSE, PetalburgWoods_EventScript_BagFull
	goto PetalburgWoods_EventScript_DevonResearcherFinish
	end

PetalburgWoods_EventScript_BagFull::
	msgbox PetalburgWoods_Text_YoureLoadedWithItems, MSGBOX_DEFAULT
	goto PetalburgWoods_EventScript_DevonResearcherFinish
	end

PetalburgWoods_EventScript_DevonResearcherFinish::
	msgbox PetalburgWoods_Text_TeamAquaAfterSomethingInRustboro, MSGBOX_DEFAULT
	applymovement LOCALID_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherStartExit
	waitmovement 0
	msgbox PetalburgWoods_Text_ICantBeWastingTime, MSGBOX_DEFAULT
	closemessage
	return

PetalburgWoods_EventScript_RemoveDevonResearcher::
	removeobject LOCALID_DEVON_EMPLOYEE
	setvar VAR_PETALBURG_WOODS_STATE, 1
	releaseall
	end

PetalburgWoods_Movement_DevonResearcherLookAround:
	face_up
	delay_16
	delay_4
	face_right
	delay_16
	delay_8
	face_left
	delay_16
	delay_8
	face_down
	delay_16
	face_right
	delay_16
	delay_8
	face_up
	delay_16
	step_end

PetalburgWoods_Movement_DevonResearcherExitLeft:
	walk_fast_right
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	step_end

PetalburgWoods_Movement_DevonResearcherApproachPlayerLeft:
	delay_16
	face_player
	walk_down
	walk_down
	step_end

PetalburgWoods_Movement_DevonResearcherApproachPlayerRight:
	delay_16
	face_player
	walk_down
	walk_down
	walk_down
	walk_in_place_faster_right
	step_end

PetalburgWoods_Movement_DevonResearcherExitRight:
	walk_fast_left
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	step_end

PetalburgWoods_Movement_WatchResearcherLeave:
	delay_16
	delay_16
	walk_in_place_faster_up
	step_end

PetalburgWoods_Movement_DevonResearcherFleeToPlayerLeft:
	walk_fast_right
	walk_fast_down
	walk_fast_down
	walk_fast_left
	walk_in_place_faster_up
	step_end

PetalburgWoods_Movement_DevonResearcherFleeToPlayerRight:
	walk_fast_down
	walk_fast_right
	walk_in_place_faster_up
	step_end

PetalburgWoods_Movement_DevonResearcherStartExit:
	walk_in_place_faster_down
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	face_up
	step_end

PetalburgWoods_Movement_AquaApproachResearcherLeft:
	walk_fast_down
	walk_fast_down
	step_end

PetalburgWoods_Movement_AquaBackOff:
	lock_facing_direction
	walk_up
	unlock_facing_direction
	step_end

PetalburgWoods_Movement_AquaRunAway:
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	delay_16
	delay_16
	step_end

PetalburgWoods_Movement_AquaApproachResearcherRight:
	walk_fast_down
	walk_fast_down
	walk_fast_down
	step_end

PetalburgWoods_Movement_AquaEntrance:
	walk_down
	walk_down
	delay_16
	delay_16
	step_end

PetalburgWoods_Movement_AquaApproachPlayer:
	walk_down
	step_end

PetalburgWoods_EventScript_Boy1::
	msgbox PetalburgWoods_Text_StayOutOfTallGrass, MSGBOX_NPC
	end

PetalburgWoods_EventScript_Boy2::
	msgbox PetalburgWoods_Text_HiddenItemsExplanation, MSGBOX_NPC
	end

PetalburgWoods_EventScript_Girl::
	lock
	faceplayer
	goto_if_set FLAG_RECEIVED_MIRACLE_SEED, PetalburgWoods_EventScript_ExplainMiracleSeed
	msgbox PetalburgWoods_Text_TryUsingThisItem, MSGBOX_DEFAULT
	giveitem ITEM_MIRACLE_SEED
	goto_if_eq VAR_RESULT, FALSE, Common_EventScript_ShowBagIsFull
	setflag FLAG_RECEIVED_MIRACLE_SEED
	release
	end

PetalburgWoods_EventScript_ExplainMiracleSeed::
	msgbox PetalburgWoods_Text_MiracleSeedExplanation, MSGBOX_DEFAULT
	release
	end

PetalburgWoods_EventScript_Sign1::
	msgbox PetalburgWoods_Text_TrainerTipsExperience, MSGBOX_SIGN
	end

PetalburgWoods_EventScript_Sign2::
	msgbox PetalburgWoods_Text_TrainerTipsPP, MSGBOX_SIGN
	end

PetalburgWoods_EventScript_Lyle::
	trainerbattle_single TRAINER_LYLE, PetalburgWoods_Text_GoBugPokemonTeam, PetalburgWoods_Text_ICouldntWin
	msgbox PetalburgWoods_Text_ImOutOfPokeBalls, MSGBOX_AUTOCLOSE
	end

PetalburgWoods_EventScript_James::
	trainerbattle_single TRAINER_JAMES_1, PetalburgWoods_Text_InstantlyPopularWithBugPokemon, PetalburgWoods_Text_CantBePopularIfILose, PetalburgWoods_EventScript_TryRegisterJames
	specialvar VAR_RESULT, ShouldTryRematchBattle
	goto_if_eq VAR_RESULT, TRUE, PetalburgWoods_EventScript_JamesRematch
	setvar VAR_0x8004, TRAINER_JAMES_1
	specialvar VAR_RESULT, IsTrainerRegistered
	goto_if_eq VAR_RESULT, FALSE, PetalburgWoods_EventScript_TryRegisterJames2
	msgbox PetalburgWoods_Text_PeopleRespectYou, MSGBOX_DEFAULT
	release
	end

PetalburgWoods_EventScript_TryRegisterJames::
	special PlayerFaceTrainerAfterBattle
	waitmovement 0
	goto_if_set FLAG_HAS_MATCH_CALL, PetalburgWoods_EventScript_RegisterJames
	release
	end

PetalburgWoods_EventScript_RegisterJames::
	msgbox PetalburgWoods_Text_IWantRematch1, MSGBOX_DEFAULT
	register_matchcall TRAINER_JAMES_1
	release
	end

PetalburgWoods_EventScript_TryRegisterJames2::
	goto_if_set FLAG_HAS_MATCH_CALL, PetalburgWoods_EventScript_RegisterJames2
	msgbox PetalburgWoods_Text_PeopleRespectYou, MSGBOX_DEFAULT
	release
	end

PetalburgWoods_EventScript_RegisterJames2::
	msgbox PetalburgWoods_Text_IWantRematch2, MSGBOX_DEFAULT
	register_matchcall TRAINER_JAMES_1
	release
	end

PetalburgWoods_EventScript_JamesRematch::
	trainerbattle_rematch TRAINER_JAMES_1, PetalburgWoods_Text_MyPokemonHaveGrown, PetalburgWoods_Text_CantBePopularIfLose
	msgbox PetalburgWoods_Text_IveBeenTrainingHard, MSGBOX_AUTOCLOSE
	end

PetalburgWoods_Text_NotAOneToBeFound:
	.string "Hmmm…\n"
	.string "Not a one to be found…$"

PetalburgWoods_Text_HaveYouSeenShroomish:
	.string "Hello, have you seen any POKéMON\n"
	.string "called SHROOMISH around here?\p"
	.string "I really love that POKéMON.$"

PetalburgWoods_Text_IWasGoingToAmbushYou:
	.string "I was going to ambush you, but you\n"
	.string "had to dawdle in PETALBURG WOODS\l"
	.string "forever, didn't you?\p"
	.string "I got sick of waiting, so here I am!$"

PetalburgWoods_Text_HandOverThosePapers:
	.string "You! DEVON RESEARCHER!\p"
	.string "Hand over those papers!$"

PetalburgWoods_Text_YouHaveToHelpMe:
	.string "Aiyeeeh!\p"
	.string "You're a POKéMON TRAINER, aren't you?\n"
	.string "You've got to help me, please!$"

PetalburgWoods_Text_NoOneCrossesTeamAqua:
	.string "Hunh? What do you think you're doing?\n"
	.string "What, you're going to protect him?\p"
	.string "No one who crosses TEAM AQUA\n"
	.string "gets any mercy, not even a kid!\p"
	.string "Come on and battle me!$"

PetalburgWoods_Text_YoureKiddingMe:
	.string "You're kidding me! You're tough!$"

PetalburgWoods_Text_YouveGotSomeNerve:
	.string "Grrr… You've got some nerve\n"
	.string "meddling with TEAM AQUA!\l"
	.string "Come on and battle me again!\p"
	.string "I wish I could say that, but I'm out of\n"
	.string "POKéMON…\p"
	.string "And, hey, we of TEAM AQUA are also\n"
	.string "after something in RUSTBORO.\p"
	.string "I'll let you go today!$"

PetalburgWoods_Text_ThatWasAwfullyClose:
	.string "Whew…\n"
	.string "That was awfully close!\p"
	.string "Thanks to you, he didn't rob me of\n"
	.string "these important papers.\p"
	.string "I know, I'll give you a GREAT BALL as\n"
	.string "my thanks!$"

PetalburgWoods_Text_TeamAquaAfterSomethingInRustboro:
	.string "Didn't that TEAM AQUA thug say\n"
	.string "they were after something in\l"
	.string "RUSTBORO, too?$"

PetalburgWoods_Text_ICantBeWastingTime:
	.string "Uh-oh! It's a crisis!\n"
	.string "I can't be wasting time!$"

PetalburgWoods_Text_YoureLoadedWithItems:
	.string "You're loaded with items.\n"
	.string "I can't give you this GREAT BALL.$"

PetalburgWoods_Text_GoBugPokemonTeam:
	.string "I caught a whole bunch of POKéMON!\p"
	.string "Go, go, go!\n"
	.string "My BUG POKéMON team!$"

PetalburgWoods_Text_ICouldntWin:
	.string "I have all these POKéMON,\n"
	.string "but I couldn't win…$"

PetalburgWoods_Text_ImOutOfPokeBalls:
	.string "I caught a bunch of POKéMON.\n"
	.string "Now I'm out of POKé BALLS.$"

PetalburgWoods_Text_InstantlyPopularWithBugPokemon:
	.string "If you take BUG POKéMON to school,\n"
	.string "you get to be instantly popular!$"

PetalburgWoods_Text_CantBePopularIfILose:
	.string "I can't be popular if I lose.$"

PetalburgWoods_Text_PeopleRespectYou:
	.string "If you have a big BUG POKéMON,\n"
	.string "people respect you for it.$"

PetalburgWoods_Text_IWantRematch1:
	.string "I want a rematch when my BUG\n"
	.string "POKéMON grow up!\p"
	.string "I'm registering you in my POKéNAV!$"

PetalburgWoods_Text_IWantRematch2:
	.string "I want a rematch when my BUG \n"
	.string "POKéMON grow up!\p"
	.string "I'm registering you in my POKéNAV!$"

PetalburgWoods_Text_MyPokemonHaveGrown:
	.string "My BUG POKéMON have grown.\n"
	.string "I'll be popular again.$"

PetalburgWoods_Text_CantBePopularIfLose:
	.string "I can't be popular if I lose.$"

PetalburgWoods_Text_IveBeenTrainingHard:
	.string "You get to be popular if you have\n"
	.string "strong POKéMON, right?\l"
	.string "So, I've been training hard.$"

PetalburgWoods_Text_StayOutOfTallGrass:
	.string "Yo, there!\n"
	.string "Your POKéMON doing okay?\p"
	.string "If your POKéMON are weak and you want\n"
	.string "to avoid battles, you should stay out\l"
	.string "of tall grass.$"

PetalburgWoods_Text_HiddenItemsExplanation:
	.string "Sometimes, there are things on the\n"
	.string "ground even if you can't see them.\p"
	.string "That's why I always check where I'm\n"
	.string "walking.$"

PetalburgWoods_Text_TryUsingThisItem:
	.string "Oh, neat!\n"
	.string "That's the BADGE from RUSTBORO GYM!\p"
	.string "You must be a TRAINER.\n"
	.string "You should try using this item.$"

PetalburgWoods_Text_MiracleSeedExplanation:
	.string "It's a MIRACLE SEED.\n"
	.string "If a POKéMON holds that item, its\l"
	.string "GRASS-type moves become stronger.\p"
	.string "Besides MIRACLE SEED, I think there are\n"
	.string "other convenient items for POKéMON\l"
	.string "to hold.$"

PetalburgWoods_Text_TrainerTipsExperience:
	.string "TRAINER TIPS\p"
	.string "Any POKéMON that appears even once\n"
	.string "in a battle is awarded EXP Points.\p"
	.string "To raise a weak POKéMON, put it at the\n"
	.string "left of the team list.\p"
	.string "As soon as a battle starts, switch it\n"
	.string "out. It will earn EXP Points without\l"
	.string "being exposed to any harm.$"

PetalburgWoods_Text_TrainerTipsPP:
	.string "TRAINER TIPS\p"
	.string "In addition to Hit Points (HP), POKéMON\n"
	.string "have Power Points (PP) that are used to\l"
	.string "make moves during battle.\p"
	.string "If a POKéMON runs out of PP, it must be\n"
	.string "taken to a POKéMON CENTER.$"


PetalburgWoods_EventScript_HideCelebi::
	setflag FLAG_HIDE_CELEBI
	return

PetalburgWoods_EventScript_TryShowCelebi::
	goto_if_unset FLAG_CAUGHT_RAIKOU, PetalburgWoods_EventScript_HideCelebi
	goto_if_unset FLAG_CAUGHT_ENTEI, PetalburgWoods_EventScript_HideCelebi
	goto_if_unset FLAG_CAUGHT_SUICUNE, PetalburgWoods_EventScript_HideCelebi
	goto_if_unset FLAG_CAUGHT_HO_OH, PetalburgWoods_EventScript_HideCelebi
	goto_if_unset FLAG_CAUGHT_LUGIA, PetalburgWoods_EventScript_HideCelebi
	goto_if_set FLAG_DEFEATED_CELEBI, Common_EventScript_NopReturn
	clearflag FLAG_HIDE_CELEBI
	return

PetalburgWoods_EventScript_TryRemoveCelebi::
	specialvar VAR_RESULT, GetBattleOutcome
	goto_if_ne VAR_RESULT, B_OUTCOME_CAUGHT, Common_EventScript_NopReturn
	removeobject LOCALID_CELEBI
	return

PetalburgWoods_EventScript_Celebi::
	lock
	faceplayer
	playmoncry SPECIES_CELEBI, CRY_MODE_ENCOUNTER
	waitmoncry
	delay 20
	seteventmon SPECIES_CELEBI, 50
	setflag FLAG_SYS_CTRL_OBJ_DELETE
	special BattleSetup_StartLegendaryBattle
	waitstate
	clearflag FLAG_SYS_CTRL_OBJ_DELETE
	specialvar VAR_RESULT, GetBattleOutcome
	goto_if_eq VAR_RESULT, B_OUTCOME_WON, PetalburgWoods_EventScript_DefeatedCelebi
	goto_if_eq VAR_RESULT, B_OUTCOME_RAN, PetalburgWoods_EventScript_RanFromCelebi
	goto_if_eq VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, PetalburgWoods_EventScript_RanFromCelebi
	setflag FLAG_CAUGHT_CELEBI
	release
	end

PetalburgWoods_EventScript_DefeatedCelebi::
	setflag FLAG_DEFEATED_CELEBI
	setvar VAR_0x8004, SPECIES_CELEBI
	goto Common_EventScript_LegendaryFlewAway
	end

PetalburgWoods_EventScript_RanFromCelebi::
	setvar VAR_0x8004, SPECIES_CELEBI
	goto Common_EventScript_LegendaryFlewAway
	end

PetalburgWoods_IgnatiusSurprise::
	applymovement LOCALID_BIRCH, IgnatiusSurprise
	waitmovement 0
	msgbox PetalburgWoods_IgnatiusSurprise_Text_0, MSGBOX_DEFAULT
	goto PetalburgWoods_IgnatiusSpeech
	return


PetalburgWoods_IgnatiusSpeech::
	msgbox PetalburgWoods_IgnatiusSpeech_Text_0, MSGBOX_DEFAULT
	closemessage
	special SpawnCameraObject
	applymovement OBJ_EVENT_ID_CAMERA, ClearingPan
	waitmovement 0
	msgbox PetalburgWoods_IgnatiusSpeech_Text_1, MSGBOX_DEFAULT
	closemessage
	applymovement OBJ_EVENT_ID_CAMERA, ClearingPanRevert
	waitmovement 0
	special RemoveCameraObject
	setvar VAR_LAPRAS_CRY, 1
	releaseall
	end


PetalburgWoods_IgnatiusRepeat::
	applymovement LOCALID_BIRCH, IgnatiusSurprise
	waitmovement 0
	msgbox PetalburgWoods_IgnatiusRepeat_Text_0, MSGBOX_DEFAULT
	closemessage
	special SpawnCameraObject
	applymovement OBJ_EVENT_ID_CAMERA, ClearingPan
	waitmovement 0
	msgbox PetalburgWoods_IgnatiusRepeat_Text_1, MSGBOX_DEFAULT
	closemessage
	applymovement OBJ_EVENT_ID_CAMERA, ClearingPanRevert
	waitmovement 0
	special RemoveCameraObject
	releaseall
	end


PetalburgWoods_Ignatius::
	lockall
	compare VAR_LAPRAS_CRY, 1
	goto_if_eq PetalburgWoods_Ignatius_1
	goto PetalburgWoods_IgnatiusSurprise
	return

PetalburgWoods_Ignatius_1:
	goto PetalburgWoods_IgnatiusRepeat
	return


PetalburgWoods_SleepingSnorlax::
	lockall
	playmoncry SPECIES_SNORLAX, 0
	msgbox PetalburgWoods_SleepingSnorlax_Text_0, MSGBOX_DEFAULT
	waitmoncry
	closemessage
	applymovement OBJ_EVENT_ID_PLAYER, SleepingSnorlax_Snorlax
	waitmovement 0
	compare VAR_LAPRAS_CRY, 1
	goto_if_eq PetalburgWoods_SleepingSnorlax_1
	goto PetalburgWoods_IgnatiusSurprise
	end

PetalburgWoods_SleepingSnorlax_1:
	goto PetalburgWoods_IgnatiusRepeat
	return


PetalburgWoods_SleepingSnorlax_NorthTrigger::
	lockall
	playmoncry SPECIES_SNORLAX, 0
	msgbox PetalburgWoods_SleepingSnorlax_Text_0, MSGBOX_DEFAULT
	waitmoncry
	applymovement OBJ_EVENT_ID_PLAYER, SleepingSnorlax_NorthTrigger
	waitmovement 0
	goto PetalburgWoods_IgnatiusSurprise
	end


PetalburgWoods_SleepingSnorlax_SouthTrigger::
	lockall
	playmoncry SPECIES_SNORLAX, 0
	msgbox PetalburgWoods_SleepingSnorlax_Text_0, MSGBOX_DEFAULT
	waitmoncry
	applymovement OBJ_EVENT_ID_PLAYER, SleepingSnorlax_SouthTrigger
	waitmovement 0
	goto PetalburgWoods_IgnatiusSurprise
	end


PetalburgWoods_LostWest::
	lockall
	msgbox PetalburgWoods_LostWest_Text_0, MSGBOX_DEFAULT
	closemessage
	applymovement OBJ_EVENT_ID_PLAYER, LostWest
	waitmovement 0
	releaseall
	return


PetalburgWoods_LostSouth::
	lockall
	msgbox PetalburgWoods_LostWest_Text_0, MSGBOX_DEFAULT
	closemessage
	applymovement OBJ_EVENT_ID_PLAYER, LostSouth
	waitmovement 0
	releaseall
	return


PetalburgWoods_LostEast::
	lockall
	msgbox PetalburgWoods_LostEast_Text_0, MSGBOX_DEFAULT
	closemessage
	applymovement OBJ_EVENT_ID_PLAYER, LostEast
	waitmovement 0
	releaseall
	return


ClearingPan:
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	step_end

ClearingPanRevert:
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	walk_fast_left
	step_end

IgnatiusSurprise:
	face_down
	step_end

SleepingSnorlax_Snorlax:
	walk_right
	face_up
	step_end

SleepingSnorlax_NorthTrigger:
	walk_left
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	face_up
	step_end

SleepingSnorlax_SouthTrigger:
	walk_left
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	face_up
	step_end

LostWest:
	face_right
	walk_right
	step_end

LostSouth:
	face_up
	walk_up
	step_end

LostEast:
	face_left
	walk_left
	step_end

PetalburgWoods_IgnatiusSurprise_Text_0:
	.string "PROF. IGNATIUS: Why {PLAYER}, you\n"
	.string "startled me.$"

PetalburgWoods_IgnatiusSpeech_Text_0:
	.string "My partner, SNORLAX, managed to get\n"
	.string "away from me.\p"
	.string "I've tracked him to the end PETALBURG\n"
	.string "WOODS, but now he seems to have\l"
	.string "fallen asleep.\p"
	.string "I've heard of a musical instrument that\n"
	.string "can awaken a sleeping SNORLAX, alas,\l"
	.string "I'm not much of a musician.\p"
	.string "I've asked for some help, but I'm not\n"
	.string "sure where {RIVAL} has gotten to,\l"
	.string "so I call upon you, {PLAYER}!\p"
	.string "Head to the clearing a little deeper\n"
	.string "into the woods, I'll meet you there!$"

PetalburgWoods_IgnatiusSpeech_Text_1:
	.string "PROF. IGNATIUS: It's not too far,\n"
	.string "it's just over there!$"

PetalburgWoods_IgnatiusRepeat_Text_0:
	.string "PROF. IGNATIUS: You don't need to worry\n"
	.string "about getting lost.$"

PetalburgWoods_IgnatiusRepeat_Text_1:
	.string "It's not far, the clearing is just over\n"
	.string "there!$"

PetalburgWoods_SleepingSnorlax_Text_0:
	.string "Snorr..$"

PetalburgWoods_LostWest_Text_0:
	.string "PROF. IGNATIUS: Hold on {PLAYER}!\p"
	.string "We really need to wake SNORLAX and\n"
	.string "clear the path before you go anywhere.\p"
	.string "If you need to, come over here and I'll\n"
	.string "remind you where the clearing is.$"

PetalburgWoods_LostEast_Text_0:
	.string "PROF. IGNATIUS: Hold on {PLAYER}!\p"
	.string "We really need to wake SNORLAX and\n"
	.string "clear the path before you go anywhere.\p"
	.string "The clearing is through the fence you\n"
	.string "just passed.$"
